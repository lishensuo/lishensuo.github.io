<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">

<link rel="icon" href="/favicon.ico" type="image/x-icon"> 
<title>Rè¯­è¨€RSeleniumçˆ¬è™«.md | Li&#39;s Bioinfo-Blog</title>
<meta name="keywords" content="R">
<meta name="description" content="1ã€htmlåŸºç¡€ä¸xpathè¯­æ³•
1.1 htmlåŸºç¡€

å¤§å¤šæ•°ç½‘é¡µå†…å®¹éƒ½æ˜¯htmlç»“æ„ç»„ç»‡çš„ï¼Œåœ¨æˆ‘ç†è§£å°±æ˜¯æœ‰ä¼—å¤šèŠ‚ç‚¹(node)ç»„æˆçš„æ ‘çŠ¶ç»“æ„ï¼›
è€Œæˆ‘ä»¬æƒ³è¦çˆ¬å–çš„å†…å®¹å°±æ˜¯å…¶ä¸­çš„æŸä¸ªæˆ–è€…æŸäº›èŠ‚ç‚¹çš„æ–‡æœ¬æ ‡ç­¾æˆ–è€…å±æ€§ä¸­ã€‚
æ›´å¤šå¯å‚è€ƒï¼š
ï¼ˆ1ï¼‰https://www.w3cschool.cn/html/html-basic.html
ï¼ˆ2ï¼‰HTMLé›¶åŸºç¡€å…¥é—¨æ•™ç¨‹ï¼ˆè¯¦ç»†ï¼‰_ZONGXPçš„åšå®¢-CSDNåšå®¢_html5é›¶åŸºç¡€å…¥é—¨æ•™ç¨‹


">
<meta name="author" content="Lishensuo">
<link rel="canonical" href="https://lishensuo.github.io/en/posts/program/250r%E8%AF%AD%E8%A8%80rselenium%E7%88%AC%E8%99%AB/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.9e4de5e3ba61ea358168341aa7cdf70abfaafb7c697dfe8624af3ddff9a35c2f.css" integrity="sha256-nk3l47ph6jWBaDQap833Cr&#43;q&#43;3xpff6GJK893/mjXC8=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.555af97124d54bb1457985dd081b8f5616a48103aafeb30ac89fde835d65aa6c.js" integrity="sha256-VVr5cSTVS7FFeYXdCBuPVhakgQOq/rMKyJ/eg11lqmw="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://lishensuo.github.io/img/Q.gif">
<link rel="icon" type="image/png" sizes="16x16" href="https://lishensuo.github.io/img/Q.gif">
<link rel="icon" type="image/png" sizes="32x32" href="https://lishensuo.github.io/img/Q.gif">
<link rel="apple-touch-icon" href="https://lishensuo.github.io/Q.gif">
<link rel="mask-icon" href="https://lishensuo.github.io/Q.gif">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://lishensuo.github.io/en/posts/program/250r%E8%AF%AD%E8%A8%80rselenium%E7%88%AC%E8%99%AB/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Rè¯­è¨€RSeleniumçˆ¬è™«.md" />
<meta property="og:description" content="1ã€htmlåŸºç¡€ä¸xpathè¯­æ³•
1.1 htmlåŸºç¡€

å¤§å¤šæ•°ç½‘é¡µå†…å®¹éƒ½æ˜¯htmlç»“æ„ç»„ç»‡çš„ï¼Œåœ¨æˆ‘ç†è§£å°±æ˜¯æœ‰ä¼—å¤šèŠ‚ç‚¹(node)ç»„æˆçš„æ ‘çŠ¶ç»“æ„ï¼›
è€Œæˆ‘ä»¬æƒ³è¦çˆ¬å–çš„å†…å®¹å°±æ˜¯å…¶ä¸­çš„æŸä¸ªæˆ–è€…æŸäº›èŠ‚ç‚¹çš„æ–‡æœ¬æ ‡ç­¾æˆ–è€…å±æ€§ä¸­ã€‚
æ›´å¤šå¯å‚è€ƒï¼š
ï¼ˆ1ï¼‰https://www.w3cschool.cn/html/html-basic.html
ï¼ˆ2ï¼‰HTMLé›¶åŸºç¡€å…¥é—¨æ•™ç¨‹ï¼ˆè¯¦ç»†ï¼‰_ZONGXPçš„åšå®¢-CSDNåšå®¢_html5é›¶åŸºç¡€å…¥é—¨æ•™ç¨‹


" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://lishensuo.github.io/en/posts/program/250r%E8%AF%AD%E8%A8%80rselenium%E7%88%AC%E8%99%AB/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-10T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2022-05-10T00:00:00&#43;00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Rè¯­è¨€RSeleniumçˆ¬è™«.md"/>
<meta name="twitter:description" content="1ã€htmlåŸºç¡€ä¸xpathè¯­æ³•
1.1 htmlåŸºç¡€

å¤§å¤šæ•°ç½‘é¡µå†…å®¹éƒ½æ˜¯htmlç»“æ„ç»„ç»‡çš„ï¼Œåœ¨æˆ‘ç†è§£å°±æ˜¯æœ‰ä¼—å¤šèŠ‚ç‚¹(node)ç»„æˆçš„æ ‘çŠ¶ç»“æ„ï¼›
è€Œæˆ‘ä»¬æƒ³è¦çˆ¬å–çš„å†…å®¹å°±æ˜¯å…¶ä¸­çš„æŸä¸ªæˆ–è€…æŸäº›èŠ‚ç‚¹çš„æ–‡æœ¬æ ‡ç­¾æˆ–è€…å±æ€§ä¸­ã€‚
æ›´å¤šå¯å‚è€ƒï¼š
ï¼ˆ1ï¼‰https://www.w3cschool.cn/html/html-basic.html
ï¼ˆ2ï¼‰HTMLé›¶åŸºç¡€å…¥é—¨æ•™ç¨‹ï¼ˆè¯¦ç»†ï¼‰_ZONGXPçš„åšå®¢-CSDNåšå®¢_html5é›¶åŸºç¡€å…¥é—¨æ•™ç¨‹


"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "åˆ†ç±»",
      "item": "https://lishensuo.github.io/en/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "ğŸ“– R\u0026Python\u0026Shell --- ç¼–ç¨‹åŸºç¡€ã€å¯è§†åŒ–ç­‰",
      "item": "https://lishensuo.github.io/en/posts/program/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Rè¯­è¨€RSeleniumçˆ¬è™«.md",
      "item": "https://lishensuo.github.io/en/posts/program/250r%E8%AF%AD%E8%A8%80rselenium%E7%88%AC%E8%99%AB/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Rè¯­è¨€RSeleniumçˆ¬è™«.md",
  "name": "Rè¯­è¨€RSeleniumçˆ¬è™«.md",
  "description": "1ã€htmlåŸºç¡€ä¸xpathè¯­æ³• 1.1 htmlåŸºç¡€ å¤§å¤šæ•°ç½‘é¡µå†…å®¹éƒ½æ˜¯htmlç»“æ„ç»„ç»‡çš„ï¼Œåœ¨æˆ‘ç†è§£å°±æ˜¯æœ‰ä¼—å¤šèŠ‚ç‚¹(node)ç»„æˆçš„æ ‘çŠ¶ç»“æ„ï¼› è€Œæˆ‘ä»¬æƒ³è¦çˆ¬å–çš„å†…å®¹å°±æ˜¯å…¶ä¸­çš„æŸä¸ªæˆ–è€…æŸäº›èŠ‚ç‚¹çš„æ–‡æœ¬æ ‡ç­¾æˆ–è€…å±æ€§ä¸­ã€‚ æ›´å¤šå¯å‚è€ƒï¼š ï¼ˆ1ï¼‰https://www.w3cschool.cn/html/html-basic.html ï¼ˆ2ï¼‰HTMLé›¶åŸºç¡€å…¥é—¨æ•™ç¨‹ï¼ˆè¯¦ç»†ï¼‰_ZONGXPçš„åšå®¢-CSDNåšå®¢_html5é›¶åŸºç¡€å…¥é—¨æ•™ç¨‹ ",
  "keywords": [
    "R"
  ],
  "articleBody": "1ã€htmlåŸºç¡€ä¸xpathè¯­æ³• 1.1 htmlåŸºç¡€ å¤§å¤šæ•°ç½‘é¡µå†…å®¹éƒ½æ˜¯htmlç»“æ„ç»„ç»‡çš„ï¼Œåœ¨æˆ‘ç†è§£å°±æ˜¯æœ‰ä¼—å¤šèŠ‚ç‚¹(node)ç»„æˆçš„æ ‘çŠ¶ç»“æ„ï¼› è€Œæˆ‘ä»¬æƒ³è¦çˆ¬å–çš„å†…å®¹å°±æ˜¯å…¶ä¸­çš„æŸä¸ªæˆ–è€…æŸäº›èŠ‚ç‚¹çš„æ–‡æœ¬æ ‡ç­¾æˆ–è€…å±æ€§ä¸­ã€‚ æ›´å¤šå¯å‚è€ƒï¼š ï¼ˆ1ï¼‰https://www.w3cschool.cn/html/html-basic.html ï¼ˆ2ï¼‰HTMLé›¶åŸºç¡€å…¥é—¨æ•™ç¨‹ï¼ˆè¯¦ç»†ï¼‰_ZONGXPçš„åšå®¢-CSDNåšå®¢_html5é›¶åŸºç¡€å…¥é—¨æ•™ç¨‹ 1.2 xpathè¯­æ³• ä¸€ä¸ªhtmlç½‘é¡µå¾€å¾€åŒ…å«éå¸¸å¤šçš„èŠ‚ç‚¹ï¼Œå¦‚ä½•å‡†ç¡®ã€å¿«é€Ÿå®šä½åˆ°ç›®æ ‡èŠ‚ç‚¹æ˜¯çˆ¬è™«è¿‡ç¨‹ä¸­çš„å…³é”®é—®é¢˜ï¼›è€Œxpathè¯­æ³•å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®ç°è¿™ä¸€ç‚¹ï¼› xpathç®€å•æ¥è¯´æ˜¯å¸®åŠ©æˆ‘ä»¬è§£æhtmlç»“æ„çš„ä¸€ç§è¯­è¨€ï¼Œç®€å•å…¥é—¨æ¯”è¾ƒæ¨èBç«™çš„è§†é¢‘ï¼šã€æ™ºæºå­¦é™¢ã€‘20åˆ†é’Ÿå¸¦ä½ ææ‡‚XPath â€” Scrapyæ•°æ®è§£æç¥å™¨_å“”å“©å“”å“©_bilibili\nè¯­æ³•åº”ç”¨ç¬”è®°æ¨èï¼š ï¼ˆ1ï¼‰XPathå®šä½è¯­æ³•æ€»ç»“_Q0717168çš„åšå®¢-CSDNåšå®¢_xpathå®šä½è¯­æ³• ï¼ˆ2ï¼‰https://learnku.com/articles/50459\n2ã€xpathå·¥å…·æ¨è 2.1 æµè§ˆå™¨è‡ªå¸¦çš„å®šä½åŠŸèƒ½ æ‰“å¼€ç›®æ ‡ç½‘é¡µâ†’ å³é”®å•å‡»â€œæ£€æŸ¥â€â†’ç‚¹å‡»å®¡æŸ¥å…ƒç´ çª—å£å·¦ä¸Šè§’ç®­å¤´â†’ç½‘é¡µç•Œé¢é€‰æ‹©æ„Ÿå…´è¶£å†…å®¹â†’é€‰ä¸­å…ƒç´ çª—å£é«˜äº®éƒ¨åˆ†â†’å³é”®å•å‡»ï¼Œé€‰æ‹©copy xpath åœ¨å…ƒç´ çª—å£ï¼Œä½¿ç”¨ctrl+Få¿«æ·é”®ï¼Œå¯ä»¥ä¸æ–­è°ƒè¯•xpath 2.2 googleæ’ä»¶ä¹‹XPath Helper å¯ä»¥ç”¨æ¥éå¸¸æ–¹ä¾¿åœ°è°ƒè¯•ã€éªŒè¯æˆ‘ä»¬çš„xpath 2.3 googleæ’ä»¶ä¹‹SelectorGadget è¯¥æ’ä»¶åªéœ€è¦æˆ‘ä»¬åœ¨ç½‘é¡µé€‰æ‹©å¥½æ„Ÿå…´è¶£çš„æ ‡ç­¾ï¼Œç„¶åä¼šè‡ªåŠ¨ç”Ÿæˆèƒ½å¤Ÿå®šä½åˆ°ç›®æ ‡èŠ‚ç‚¹çš„xpathè·¯å¾„ï¼› ä¸è¿‡æœ‰ä¸€ä¸ªç¼ºç‚¹å°±æ˜¯ï¼šSelectorGadgetç”Ÿæˆçš„xpathè·¯å¾„ä¸€èˆ¬æ¯”è¾ƒå¤æ‚ï¼Œå¦‚æœæˆ‘ä»¬è‡ªå·±èŠ±å¿ƒæ€è°ƒè¯•ä¸€ä¸‹(2.1)å¾€å¾€ä¼šç”Ÿæˆç®€æ´çš„xpathè·¯å¾„ã€é€šå¾€ç½—é©¬çš„é“è·¯ä¸æ­¢ä¸€æ¡ã€‘ 3ã€Rè¯­è¨€çˆ¬è™«æµç¨‹ ä¸€å¼€å§‹å­¦ä¹ Rè¯­è¨€çˆ¬è™«æ—¶ï¼Œç›´æ¥xml2::read_html()å¯¹æäº¤çš„ç½‘å€è¿›è¡Œè§£æï¼Œä½†ç»å¸¸ä¼šå‡ºç°æäº¤æ­£ç¡®çš„xpathè·¯å¾„ï¼Œä½†æ˜¯æ²¡æœ‰æå–åˆ°èŠ‚ç‚¹å†…å®¹çš„å°´å°¬ç»“æœ{xml_nodeset (0)}ã€‚ åæ¥äº†è§£åˆ°é’ˆå¯¹åŠ¨æ€ç½‘é¡µçš„seleniumçˆ¬å–æ–¹æ³•ï¼Œå°è¯•äº†ä¸€ä¸‹æœç„¶å¯ä»¥å¾—åˆ°é¢„æœŸçš„ç»“æœã€‚è€Œä¸”æˆ‘è§‰å¾—åŠ¨é™æ€ç½‘é¡µé€šåƒï¼Œå› æ­¤ä»¥åçš„Rè¯­è¨€çˆ¬è™«éƒ½é‡‡ç”¨ä¸‹è¿°çš„æµç¨‹æ¥æ“ä½œã€‚ å‚è€ƒç¬”è®° ï¼šå¾®ä¿¡å…¬ä¼—å·ï¼šè€ä¿Šä¿Šçš„ç”Ÿä¿¡ç¬”è®°â€“Rè¯­è¨€çˆ¬è™«ç³»åˆ—ç¬”è®° R çˆ¬è™«ä¹‹çˆ¬å–æ–‡çŒ®ä¿¡æ¯ (qq.com) 4ã€seleniumç›¸å…³é…ç½®(window) â­ å‚è€ƒç¬”è®°ï¼šhttps://zhuanlan.zhihu.com/p/24772389\nstep1ï¼šå®‰è£…Java ä¸‹è½½ã€å®‰è£…å®¹æ˜“ï¼Œä½†æ˜¯å°†javaå‘½ä»¤æ·»åŠ åˆ°ç¯å¢ƒå˜é‡éœ€è¦ä»”ç»†ä¸€ç‚¹ ç½‘ä¸Šæœ‰å¾ˆå¤šç¬”è®°ï¼Œä¾‹å¦‚ï¼šJava JDKå®‰è£…å’Œé…ç½® - Javaæ•™ç¨‹â„¢ (yiibai.com) å¦‚æœåœ¨windowçš„cmdå¹³å°è°ƒç”¨javaå‘½ä»¤ï¼Œå‡ºç°å¦‚ä¸‹ç»“æœï¼Œè¯´æ˜å®‰è£…ã€é…ç½®javaæˆåŠŸäº† step2ï¼šchromeæµè§ˆå™¨ç›¸å…³ é¦–å…ˆè¦ä¸‹è½½ã€å®‰è£…Chromeæµè§ˆå™¨ï¼Œæ ¹æ®æç¤ºé€‰æ‹©é»˜è®¤å®‰è£…è·¯å¾„å³å¯ https://www.google.cn/chrome/ ç„¶åè¦ä¸‹è½½ChromeDriver.exe https://sites.google.com/chromium.org/driver/ æœ‰ä¸¤ç‚¹è¦æ³¨æ„ï¼ˆ1ï¼‰ä¸‹è½½ChromeDriverç‰ˆæœ¬è¦ä¸Chromeç‰ˆæœ¬ä¸€è‡´ï¼ˆæˆ‘çš„æ˜¯94ç³»åˆ—ï¼‰ï¼›ï¼ˆ2ï¼‰å‚¨å­˜è·¯å¾„è¦ä¸chrome.exeåœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹å†…ï¼›æˆ‘çš„å®‰è£…è·¯å¾„æ˜¯ C:\\Program Files\\Google\\Chrome\\Application step3ï¼šä¸‹è½½selenium-server-standalone.jar ä¸‹è½½åœ°å€ï¼šhttp://selenium-release.storage.googleapis.com/index.html æœ‰å¾ˆå¤šç‰ˆæœ¬å¯ä¾›é€‰æ‹©ï¼Œæˆ‘ä¸‹è½½çš„æ˜¯3.14ç‰ˆæœ¬ï¼›åŒæ—¶ä¸ºäº†ç®¡ç†æ–¹ä¾¿ï¼Œä¸ä¸Šé¢æ–‡ä»¶æ”¾åœ¨äº†åŒä¸€æ–‡ä»¶å¤¹å†…ï¼› æœ€åå¦‚æœè°ƒç”¨ä¸‹é¢å‘½ä»¤ï¼Œå‡ºç°å¦‚ä¸‹å›¾çš„ç»“æœè¯´æ˜seleniumç›¸å…³ç¯å¢ƒéƒ½é…ç½®å¥½äº†\n1 java -Dwebdriver.chrome.driver=\"C:\\Program Files\\Google\\Chrome\\Application\\chromedriver.exe\" -jar \"C:\\Program Files\\Google\\Chrome\\Application\\selenium-server-standalone-3.141.59.jar\" 5ã€è±†ç“£çˆ¬è™«å®æˆ˜ å‰æœŸå‡†å¤‡ ï¼ˆ1ï¼‰å‡†å¤‡seleniumç¯å¢ƒ æ‰“å¼€windowå‘½ä»¤è¡Œç•Œé¢ï¼šwin + r ï¼Œè¾“å…¥cmdå›è½¦ï¼›ç„¶åè¾“å…¥ä»¥ä¸‹å‘½ä»¤ã€‚å¾…æˆåŠŸå‡ºç°ä¸Šå›¾ç»“æœåï¼Œæœ€å°åŒ–ç•Œé¢å³å¯ã€‚ä¹‹åçš„æ“ä½œéƒ½åŸºäºR 1 java -Dwebdriver.chrome.driver=\"C:\\Program Files\\Google\\Chrome\\Application\\chromedriver.exe\" -jar \"C:\\Program Files\\Google\\Chrome\\Application\\selenium-server-standalone-3.141.59.jar\" ï¼ˆ2ï¼‰å®‰è£…ã€åŠ è½½RåŒ… 1 2 3 4 5 6 library(RSelenium) #è°ƒè¯•æµè§ˆå™¨ library(xml2) #è§£æhtmlç»“æ„ library(rvest) #ç»“åˆxpathï¼Œå®šä½ç›®æ ‡èŠ‚ç‚¹ library(tidyverse) #æ•°æ®æ•´ç†ã€æ¸…æ´— å®æˆ˜1ï¼šçˆ¬å–æœ€è¿‘çƒ­é—¨ç”µå½±çš„åå­—ã€è¯„åˆ† ç½‘å€é“¾æ¥ï¼šhttps://movie.douban.com/ ç›®æ ‡ièŠ‚ç‚¹çš„xpathè·¯å¾„ï¼š//*[@id=\"content\"]/div/div[2]/div[4]/div[3]/div/div[1]/div//p Step1ï¼šè°ƒç”¨æµè§ˆå™¨ï¼Œè¿›å…¥ç›®æ ‡ç½‘å€ 1 2 3 4 remDr \u003c- remoteDriver(remoteServerAddr = \"localhost\", port = 4444, browserName = \"chrome\") remDr$open() # æ‰“å¼€æµè§ˆå™¨ remDr$navigate(\"https://movie.douban.com\") #è¿›å…¥ç½‘å€ Step2ï¼šè·å¾—ã€è§£æå½“å‰ç½‘é¡µhtmlå†…å®¹ 1 webpage \u003c- read_html(remDr$getPageSource()[[1]][1]) #è·å¾—ç½‘é¡µçš„htmlå†…å®¹ Step3ï¼šåº”ç”¨xpathè·¯å¾„ï¼Œå®šä½ã€è·å–ç›®æ ‡èŠ‚ç‚¹å†…å®¹ html_text() å¯è·å¾—ç›®æ ‡èŠ‚ç‚¹çš„æ–‡æœ¬å†…å®¹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 xpath_name = '//*[@id=\"content\"]/div/div[2]/div[4]/div[3]/div/div[1]/div//p' text_raw = html_elements(webpage, xpath = xpath_name) %\u003e% html_text() str(text_raw) # chr [1:70] \"\\n \\n\\n è‡´å‘½æ„Ÿåº”\\n\\n \\n 6.8\\n \\n \" ... #è¿ç”¨å„ç§å­—ç¬¦å¤„ç†æŠ€å·§ï¼Œæ¸…æ´—æ•°æ® text_fine = text_raw %\u003e% gsub(\" \",\"\",.) %\u003e% str_split(\"\\n{2,}\",simplify = T) %\u003e% .[,2:3] %\u003e% as.data.frame() %\u003e% rename(Name=V1, Score=V2) head(text_fine) # Name Score # 1 è‡´å‘½æ„Ÿåº” 6.8 # 2 å¯†å®¤é€ƒç”Ÿ2 6.2 # 3 å¥å¬å¥³å­© 8.6 # 4 æ™®å‰å²›çš„æœ€åé»„æ˜ 9.0 # 5 Xç‰¹é£é˜Ÿï¼šå…¨å‘˜é›†ç»“ 8.0 # 6 çµåª’ 6.4 å…³äºç›®æ ‡èŠ‚ç‚¹çš„xpathè·¯å¾„ç¡®è®¤æ˜¯å¾ˆå…³é”®çš„ä¸€ã€‚å…¶æ¬¡å½“xpathè·¯å¾„æœ¬èº«å«æœ‰åŒå¼•å·æ—¶ï¼Œåˆ›å»ºå­—ç¬¦ä¸²æ—¶ä¸¤è¾¹è¦æ”¹åˆ°å•å¼•å·ã€‚\nå®æˆ˜2ï¼šçˆ¬å–æœ€è¿‘çƒ­é—¨ç”µå½±çš„å›¾ç‰‡ã€è¯¦æƒ…é¡µé“¾æ¥ çˆ¬å–å›¾ç‰‡æ—¶æœ¬è´¨ä¸Šè¿˜æ˜¯è·å¾—å›¾ç‰‡å¯¹åº”çš„é“¾æ¥ï¼Œç„¶åå†ä¸‹è½½å³å¯ã€‚ è€Œé“¾æ¥å†…å®¹ä¸€èˆ¬ä½œä¸ºèŠ‚ç‚¹çš„å±æ€§å€¼ï¼Œè€Œä¸ä¼šåœ¨ç½‘é¡µæ˜¾ç¤ºå‡ºæ¥ã€‚ html_attr()å¯è·å¾—ç›®æ ‡èŠ‚ç‚¹çš„å±æ€§å€¼ å›¾ç‰‡èŠ‚ç‚¹xapthï¼š//*[@id='content']/div/div[2]/div[4]/div[3]/div/div[1]/div//div/img ï¼ˆ1ï¼‰çˆ¬å–å›¾ç‰‡ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 xpath_img = \"//*[@id='content']/div/div[2]/div[4]/div[3]/div/div[1]/div//div/img\" img_link = html_elements(webpage, xpath = xpath_img) %\u003e% html_attr(name = 'src') head(img_link) # [1] \"https://img1.doubanio.com/view/photo/s_ratio_poster/public/p2672792129.jpg\" # [2] \"https://img9.doubanio.com/view/photo/s_ratio_poster/public/p2729074424.jpg\" # [3] \"https://img2.doubanio.com/view/photo/s_ratio_poster/public/p2665001891.jpg\" # [4] \"https://img9.doubanio.com/view/photo/s_ratio_poster/public/p2652268085.jpg\" # [5] \"https://img2.doubanio.com/view/photo/s_ratio_poster/public/p2637084112.jpg\" # [6] \"https://img2.doubanio.com/view/photo/s_ratio_poster/public/p2661923862.jpg\" #æ‰¹é‡ä¸‹è½½å›¾ç‰‡ #è·å–å±æ€§åä¸º src çš„å€¼ dir.create('tmp') for (i in 1:length(img_link)) { # i = 1 print(i) img_name \u003c- paste0('tmp/',text_fine$Name[i],\".jpg\") download.file(url = img_link[i], destfile = img_name, method = \"curl\") } ç”±äºå¯ä»¥é€šè¿‡ç‚¹å‡»ç”µå½±åè¿›å…¥ç”µå½±è¯¦æƒ…é¡µï¼Œç”±æ­¤åˆ¤å®šåœ¨ç”µå½±åèŠ‚ç‚¹çš„å±æ€§åŒ…å«é“¾æ¥å±æ€§ ç”µå½±åèŠ‚ç‚¹xapthï¼š//*[@id='content']/div/div[2]/div[4]/div[3]/div/div[1]/div//a ï¼ˆ2ï¼‰çˆ¬å–é“¾æ¥ 1 2 3 4 5 6 7 8 9 10 11 12 xpath_link = \"//*[@id='content']/div/div[2]/div[4]/div[3]/div/div[1]/div//a\" movie_link = html_elements(webpage, xpath = xpath_link) %\u003e% html_attr(name = 'href') movie_info = cbind(text_fine, movie_link) head(movie_info) # Name Score movie_link # 1 è‡´å‘½æ„Ÿåº” 6.8 https://movie.douban.com/subject/25909236/?tag=çƒ­é—¨\u0026from=gaia_video # 2 å¯†å®¤é€ƒç”Ÿ2 6.2 https://movie.douban.com/subject/30469922/?tag=çƒ­é—¨\u0026from=gaia # 3 å¥å¬å¥³å­© 8.6 https://movie.douban.com/subject/35048413/?tag=çƒ­é—¨\u0026from=gaia # 4 æ™®å‰å²›çš„æœ€åé»„æ˜ 9.0 https://movie.douban.com/subject/35472124/?tag=çƒ­é—¨\u0026from=gaia # 5 Xç‰¹é£é˜Ÿï¼šå…¨å‘˜é›†ç»“ 8.0 https://movie.douban.com/subject/26741632/?tag=çƒ­é—¨\u0026from=gaia # 6 çµåª’ 6.4 https://movie.douban.com/subject/35208823/?tag=çƒ­é—¨\u0026from=gaia å®æˆ˜3ï¼šçˆ¬å–ä¸åŒç±»å‹æ ‡ç­¾çš„ç”µå½±åã€è¯„åˆ†(æ¨¡æ‹Ÿé¼ æ ‡ç‚¹å‡»ç¿»é¡µ) Seleniumçš„å¼ºå¤§ä¹‹å¤„è‡³äºå¯ä»¥æ¨¡æ‹Ÿé¼ æ ‡æ“ä½œè¿›è¡Œç½‘é¡µé€‰æ‹©ã€åˆ‡æ¢ï¼› å¦‚ä¸‹å›¾ï¼Œæˆ‘ä»¬æƒ³è·å¾—æ¡†é€‰å‡ºçš„8ç§ç±»åˆ«çš„ç”µå½±åä¸è¯„åˆ† ç›®æ ‡ç½‘å€ï¼šhttps://movie.douban.com/tag/#/ Step1ï¼šè°ƒç”¨æµè§ˆå™¨ï¼Œè¿›å…¥ç›®æ ‡ç½‘å€ 1 2 3 4 remDr \u003c- remoteDriver(remoteServerAddr = \"localhost\", port = 4444, browserName = \"chrome\") remDr$open() # æ‰“å¼€æµè§ˆå™¨ remDr$navigate(\"https://movie.douban.com\") #è¿›å…¥ç½‘å€ Step2ï¼šè·å¾—ã€è§£æå½“å‰ç½‘é¡µhtmlå†…å®¹ 1 webpage \u003c- read_html(remDr$getPageSource()[[1]][1]) #è·å¾—ç½‘é¡µçš„htmlå†…å®¹ Step3ï¼šæˆ‘ä»¬éœ€è¦æ¨¡æ‹Ÿé¼ æ ‡ç‚¹å‡»é‚£ä¸ªèŠ‚ç‚¹ã€ç‚¹å¤šå°‘æ¬¡ 1 2 3 4 movie_type = webpage %\u003e% html_elements(xpath = \"//*[@id='app']/div/div[1]/div[1]/ul[5]//span\") %\u003e% html_text() %\u003e% .[2:9] movie_type # [1] \"ç»å…¸\" \"é’æ˜¥\" \"æ–‡è‰º\" \"æç¬‘\" \"åŠ±å¿—\" \"é­”å¹»\" \"æ„Ÿäºº\" \"å¥³æ€§\" Step4ï¼šå¾ªç¯ç‚¹å‡»ã€è¿›è¡Œç›®æ ‡æ–‡æœ¬çˆ¬å– 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 movie_stat = list() for(i in seq(movie_type)){ # i=1 print(i) #é¼ æ ‡ç‚¹å‡»èŠ‚ç‚¹çš„xpathè·¯å¾„ button_xpath = sprintf(\"//*[@id='app']/div/div[1]/div[1]/ul[5]//span[contains(text(), '%s')]\", movie_type[i]) #è¯¥èŠ‚ç‚¹çš„é¼ æ ‡ç‚¹å‡»å±æ€§ button = remDr$findElement(using ='xpath', value = button_xpath) #æ¨¡æ‹Ÿé¼ æ ‡ç‚¹å‡»è¯¥èŠ‚ç‚¹ button$clickElement() Sys.sleep(3) #æ›´æ–°å½“å‰htmlå†…å®¹ webpage \u003c- read_html(remDr$getPageSource()[[1]][1]) xpath_name = \"//*[@id='app']/div/div[1]/div[3]//span\" #ç»“åˆç›®æ ‡æ–‡æœ¬çš„xpathè·¯å¾„çˆ¬å–å†…å®¹ test_raw = html_elements(webpage, xpath = xpath_name) %\u003e% html_text() movie_stat[[i]] = data.frame(Type = movie_type[i], Name=test_raw[seq(2,60,3)], Score=test_raw[seq(3,60,3)]) } movie_stats = do.call(rbind, movie_stat) head(movie_stats) # Type Name Score # 1 ç»å…¸ æ²™ä¸˜ 7.8 # 2 ç»å…¸ è‚–ç”³å…‹çš„æ•‘èµ 9.7 # 3 ç»å…¸ æˆ‘ä¸æ˜¯è¯ç¥ 9.0 # 4 ç»å…¸ ç–¯ç‹‚åŠ¨ç‰©åŸ 9.2 # 5 ç»å…¸ åƒä¸åƒå¯» 9.4 # 6 ç»å…¸ æ³°å¦å°¼å…‹å· 9.4 table(movie_stats$Type) # æ„Ÿäºº æç¬‘ ç»å…¸ åŠ±å¿— é­”å¹» å¥³æ€§ é’æ˜¥ æ–‡è‰º # 20 20 20 20 20 20 20 20 å®æˆ˜4ï¼šçˆ¬å–è¡¨æ ¼ç»“æ„çš„æ–‡æœ¬ æœ‰æ—¶å€™æˆ‘ä»¬çš„ç›®æ ‡æ•°æ®æ˜¯ä»¥è¡¨æ ¼ç»“æ„æ”¾åœ¨ç½‘é¡µçš„ï¼›æ­¤æ—¶å¯ç›´æ¥åˆ©ç”¨html_table()å°†è¡¨æ ¼çˆ¬å–ä¸‹æ¥ ç¤ºä¾‹ç½‘å€ï¼šç”±äºè±†ç“£ç½‘æ²¡æœ‰æ‰¾åˆ°è¡¨æ ¼æ•°æ®ï¼Œå› æ­¤åˆ‡æ¢åˆ°ä¹‹å‰å­¦è¿‡çš„è®°å½•ç–¾ç—…ç›¸å…³ä¿¡æ¯çš„ç½‘ç«™https://www.malacards.org/card/alzheimer_disease?search=Alzheimer%20Disease è¿›å…¥æ­¤ç½‘å€ï¼Œæƒ³å¯¹ADç›¸å…³çš„åŸºå› ä¿¡æ¯è¿›è¡Œçˆ¬å–ï¼› xpathè·¯å¾„ï¼š//*[@id=\"RelatedGenes-table\"] 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 remDr \u003c- remoteDriver(remoteServerAddr = \"localhost\", port = 4444, browserName = \"chrome\") remDr$open() # æ‰“å¼€æµè§ˆå™¨ remDr$navigate(\"https://www.malacards.org/card/alzheimer_disease?search=Alzheimer%20Disease\") #è¿›å…¥åˆ†ç±»ç½‘å€ webpage \u003c- read_html(remDr$getPageSource()[[1]][1]) #è·å¾—ç½‘é¡µçš„htmlå†…å®¹ xpath_test = '//*[@id=\"RelatedGenes-table\"]' test = webpage %\u003e% html_elements(xpath = xpath_test) %\u003e% html_table() df = test[[1]] head(df) # A tibble: 6 x 7 # `#` Symbol Description Category Score Evidence `PubMed IDs` # # 1 1 \"APP\" Amyloid Beta P~ \"Protein~ 1408. \"Molecular bas~ \"1302033 1303239 ~ # 2 1 \"APP::MIR1~ MIR106B Macro ~ \"\" NA \"\" \"\" # 3 2 \"HFE\" Homeostatic Ir~ \"Protein~ 1098. \"Molecular bas~ \"12429850 8696333~ # 4 3 \"NOS3\" Nitric Oxide S~ \"Protein~ 708. \"Molecular bas~ \"9737779 9894802 ~ # 5 4 \"MPO\" Myeloperoxidase \"Protein~ 696. \"Molecular bas~ \"11087769 1291567~ # 6 5 \"PLAU\" Plasminogen Ac~ \"Protein~ 695. \"Molecular bas~ \"12898287 1561577~ ",
  "wordCount" : "4006",
  "inLanguage": "en",
  "datePublished": "2022-05-10T00:00:00Z",
  "dateModified": "2022-05-10T00:00:00Z",
  "author":[{
    "@type": "Person",
    "name": "Lishensuo"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://lishensuo.github.io/en/posts/program/250r%E8%AF%AD%E8%A8%80rselenium%E7%88%AC%E8%99%AB/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Li's Bioinfo-Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://lishensuo.github.io/img/Q.gif"
    }
  }
}
</script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://lishensuo.github.io/en/" accesskey="h" title="Li&#39;s Bioinfo-Blog (Alt + H)">Li&#39;s Bioinfo-Blog</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                </ul>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://lishensuo.github.io/en/" title="ä¸»é¡µ">
                    <span>ä¸»é¡µ</span>
                </a>
            </li>
            <li>
                <a href="https://lishensuo.github.io/en/posts" title="åˆ†ç±»">
                    <span>åˆ†ç±»</span>
                </a>
            </li>
            <li>
                <a href="https://lishensuo.github.io/en/tags" title="æ ‡ç­¾">
                    <span>æ ‡ç­¾</span>
                </a>
            </li>
            <li>
                <a href="https://lishensuo.github.io/en/archives/" title="å½’æ¡£">
                    <span>å½’æ¡£</span>
                </a>
            </li>
            <li>
                <a href="https://lishensuo.github.io/en/about" title="å…³äº">
                    <span>å…³äº</span>
                </a>
            </li>
            <li>
                <a href="https://lishensuo.github.io/en/search" title="æœç´¢ (Alt &#43; /)" accesskey=/>
                    <span>æœç´¢</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://lishensuo.github.io/en/">Home</a>&nbsp;Â»&nbsp;<a href="https://lishensuo.github.io/en/posts/">åˆ†ç±»</a>&nbsp;Â»&nbsp;<a href="https://lishensuo.github.io/en/posts/program/">ğŸ“– R&amp;Python&amp;Shell --- ç¼–ç¨‹åŸºç¡€ã€å¯è§†åŒ–ç­‰</a></div>
    <h1 class="post-title">
      Rè¯­è¨€RSeleniumçˆ¬è™«.md
    </h1>
    <div class="post-meta">













Create:&amp;nbsp;&lt;span title=&#39;2022-05-10 00:00:00 &#43;0000 UTC&#39;&gt;2022-05-10&lt;/span&gt;&amp;nbsp;|&amp;nbsp;Update:&amp;nbsp;2022-05-10&amp;nbsp;|&amp;nbsp;Words:&amp;nbsp;4006&amp;nbsp;|&amp;nbsp;8 min&amp;nbsp;|&amp;nbsp;Lishensuo

|  Viewers: <span id="busuanzi_value_page_pv"></span> 
	  
    </div>
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">Table of Contents</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#1html%e5%9f%ba%e7%a1%80%e4%b8%8expath%e8%af%ad%e6%b3%95" aria-label="1ã€htmlåŸºç¡€ä¸xpathè¯­æ³•">1ã€htmlåŸºç¡€ä¸xpathè¯­æ³•</a><ul>
                            
                    <li>
                        <a href="#11-html%e5%9f%ba%e7%a1%80" aria-label="1.1 htmlåŸºç¡€">1.1 htmlåŸºç¡€</a></li>
                    <li>
                        <a href="#12-xpath%e8%af%ad%e6%b3%95" aria-label="1.2 xpathè¯­æ³•">1.2 xpathè¯­æ³•</a></li></ul>
                    </li>
                    <li>
                        <a href="#2xpath%e5%b7%a5%e5%85%b7%e6%8e%a8%e8%8d%90" aria-label="2ã€xpathå·¥å…·æ¨è">2ã€xpathå·¥å…·æ¨è</a><ul>
                            
                    <li>
                        <a href="#21-%e6%b5%8f%e8%a7%88%e5%99%a8%e8%87%aa%e5%b8%a6%e7%9a%84%e5%ae%9a%e4%bd%8d%e5%8a%9f%e8%83%bd" aria-label="2.1 æµè§ˆå™¨è‡ªå¸¦çš„å®šä½åŠŸèƒ½">2.1 æµè§ˆå™¨è‡ªå¸¦çš„å®šä½åŠŸèƒ½</a></li>
                    <li>
                        <a href="#22-google%e6%8f%92%e4%bb%b6%e4%b9%8bxpath-helper" aria-label="2.2 googleæ’ä»¶ä¹‹XPath Helper">2.2 googleæ’ä»¶ä¹‹<code>XPath Helper</code></a></li>
                    <li>
                        <a href="#23-google%e6%8f%92%e4%bb%b6%e4%b9%8bselectorgadget" aria-label="2.3 googleæ’ä»¶ä¹‹SelectorGadget">2.3 googleæ’ä»¶ä¹‹<code>SelectorGadget</code></a></li></ul>
                    </li>
                    <li>
                        <a href="#3r%e8%af%ad%e8%a8%80%e7%88%ac%e8%99%ab%e6%b5%81%e7%a8%8b" aria-label="3ã€Rè¯­è¨€çˆ¬è™«æµç¨‹">3ã€Rè¯­è¨€çˆ¬è™«æµç¨‹</a></li>
                    <li>
                        <a href="#4selenium%e7%9b%b8%e5%85%b3%e9%85%8d%e7%bd%aewindow-" aria-label="4ã€seleniumç›¸å…³é…ç½®(window) â­">4ã€seleniumç›¸å…³é…ç½®(window) â­</a><ul>
                            
                    <li>
                        <a href="#step1%e5%ae%89%e8%a3%85java" aria-label="step1ï¼šå®‰è£…Java">step1ï¼šå®‰è£…Java</a></li>
                    <li>
                        <a href="#step2chrome%e6%b5%8f%e8%a7%88%e5%99%a8%e7%9b%b8%e5%85%b3" aria-label="step2ï¼šchromeæµè§ˆå™¨ç›¸å…³">step2ï¼šchromeæµè§ˆå™¨ç›¸å…³</a></li>
                    <li>
                        <a href="#step3%e4%b8%8b%e8%bd%bdselenium-server-standalonejar" aria-label="step3ï¼šä¸‹è½½selenium-server-standalone.jar">step3ï¼šä¸‹è½½selenium-server-standalone.jar</a></li></ul>
                    </li>
                    <li>
                        <a href="#5%e8%b1%86%e7%93%a3%e7%88%ac%e8%99%ab%e5%ae%9e%e6%88%98" aria-label="5ã€è±†ç“£çˆ¬è™«å®æˆ˜">5ã€è±†ç“£çˆ¬è™«å®æˆ˜</a><ul>
                            
                    <li>
                        <a href="#%e5%89%8d%e6%9c%9f%e5%87%86%e5%a4%87" aria-label="å‰æœŸå‡†å¤‡">å‰æœŸå‡†å¤‡</a><ul>
                            
                    <li>
                        <a href="#1%e5%87%86%e5%a4%87selenium%e7%8e%af%e5%a2%83" aria-label="ï¼ˆ1ï¼‰å‡†å¤‡seleniumç¯å¢ƒ">ï¼ˆ1ï¼‰å‡†å¤‡seleniumç¯å¢ƒ</a></li>
                    <li>
                        <a href="#2%e5%ae%89%e8%a3%85%e5%8a%a0%e8%bd%bdr%e5%8c%85" aria-label="ï¼ˆ2ï¼‰å®‰è£…ã€åŠ è½½RåŒ…">ï¼ˆ2ï¼‰å®‰è£…ã€åŠ è½½RåŒ…</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e5%ae%9e%e6%88%981%e7%88%ac%e5%8f%96%e6%9c%80%e8%bf%91%e7%83%ad%e9%97%a8%e7%94%b5%e5%bd%b1%e7%9a%84%e5%90%8d%e5%ad%97%e8%af%84%e5%88%86" aria-label="å®æˆ˜1ï¼šçˆ¬å–æœ€è¿‘çƒ­é—¨ç”µå½±çš„åå­—ã€è¯„åˆ†">å®æˆ˜1ï¼šçˆ¬å–æœ€è¿‘çƒ­é—¨ç”µå½±çš„åå­—ã€è¯„åˆ†</a><ul>
                            
                    <li>
                        <a href="#step1%e8%b0%83%e7%94%a8%e6%b5%8f%e8%a7%88%e5%99%a8%e8%bf%9b%e5%85%a5%e7%9b%ae%e6%a0%87%e7%bd%91%e5%9d%80" aria-label="Step1ï¼šè°ƒç”¨æµè§ˆå™¨ï¼Œè¿›å…¥ç›®æ ‡ç½‘å€">Step1ï¼šè°ƒç”¨æµè§ˆå™¨ï¼Œè¿›å…¥ç›®æ ‡ç½‘å€</a></li>
                    <li>
                        <a href="#step2%e8%8e%b7%e5%be%97%e8%a7%a3%e6%9e%90%e5%bd%93%e5%89%8d%e7%bd%91%e9%a1%b5html%e5%86%85%e5%ae%b9" aria-label="Step2ï¼šè·å¾—ã€è§£æå½“å‰ç½‘é¡µhtmlå†…å®¹">Step2ï¼šè·å¾—ã€è§£æå½“å‰ç½‘é¡µhtmlå†…å®¹</a></li>
                    <li>
                        <a href="#step3%e5%ba%94%e7%94%a8xpath%e8%b7%af%e5%be%84%e5%ae%9a%e4%bd%8d%e8%8e%b7%e5%8f%96%e7%9b%ae%e6%a0%87%e8%8a%82%e7%82%b9%e5%86%85%e5%ae%b9" aria-label="Step3ï¼šåº”ç”¨xpathè·¯å¾„ï¼Œå®šä½ã€è·å–ç›®æ ‡èŠ‚ç‚¹å†…å®¹">Step3ï¼šåº”ç”¨xpathè·¯å¾„ï¼Œå®šä½ã€è·å–ç›®æ ‡èŠ‚ç‚¹å†…å®¹</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e5%ae%9e%e6%88%982%e7%88%ac%e5%8f%96%e6%9c%80%e8%bf%91%e7%83%ad%e9%97%a8%e7%94%b5%e5%bd%b1%e7%9a%84%e5%9b%be%e7%89%87%e8%af%a6%e6%83%85%e9%a1%b5%e9%93%be%e6%8e%a5" aria-label="å®æˆ˜2ï¼šçˆ¬å–æœ€è¿‘çƒ­é—¨ç”µå½±çš„å›¾ç‰‡ã€è¯¦æƒ…é¡µé“¾æ¥">å®æˆ˜2ï¼šçˆ¬å–æœ€è¿‘çƒ­é—¨ç”µå½±çš„å›¾ç‰‡ã€è¯¦æƒ…é¡µé“¾æ¥</a><ul>
                            
                    <li>
                        <a href="#1%e7%88%ac%e5%8f%96%e5%9b%be%e7%89%87" aria-label="ï¼ˆ1ï¼‰çˆ¬å–å›¾ç‰‡">ï¼ˆ1ï¼‰çˆ¬å–å›¾ç‰‡</a></li>
                    <li>
                        <a href="#2%e7%88%ac%e5%8f%96%e9%93%be%e6%8e%a5" aria-label="ï¼ˆ2ï¼‰çˆ¬å–é“¾æ¥">ï¼ˆ2ï¼‰çˆ¬å–é“¾æ¥</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e5%ae%9e%e6%88%983%e7%88%ac%e5%8f%96%e4%b8%8d%e5%90%8c%e7%b1%bb%e5%9e%8b%e6%a0%87%e7%ad%be%e7%9a%84%e7%94%b5%e5%bd%b1%e5%90%8d%e8%af%84%e5%88%86%e6%a8%a1%e6%8b%9f%e9%bc%a0%e6%a0%87%e7%82%b9%e5%87%bb%e7%bf%bb%e9%a1%b5" aria-label="å®æˆ˜3ï¼šçˆ¬å–ä¸åŒç±»å‹æ ‡ç­¾çš„ç”µå½±åã€è¯„åˆ†(æ¨¡æ‹Ÿé¼ æ ‡ç‚¹å‡»ç¿»é¡µ)">å®æˆ˜3ï¼šçˆ¬å–ä¸åŒç±»å‹æ ‡ç­¾çš„ç”µå½±åã€è¯„åˆ†(æ¨¡æ‹Ÿé¼ æ ‡ç‚¹å‡»ç¿»é¡µ)</a><ul>
                            
                    <li>
                        <a href="#step1%e8%b0%83%e7%94%a8%e6%b5%8f%e8%a7%88%e5%99%a8%e8%bf%9b%e5%85%a5%e7%9b%ae%e6%a0%87%e7%bd%91%e5%9d%80-1" aria-label="Step1ï¼šè°ƒç”¨æµè§ˆå™¨ï¼Œè¿›å…¥ç›®æ ‡ç½‘å€">Step1ï¼šè°ƒç”¨æµè§ˆå™¨ï¼Œè¿›å…¥ç›®æ ‡ç½‘å€</a></li>
                    <li>
                        <a href="#step2%e8%8e%b7%e5%be%97%e8%a7%a3%e6%9e%90%e5%bd%93%e5%89%8d%e7%bd%91%e9%a1%b5html%e5%86%85%e5%ae%b9-1" aria-label="Step2ï¼šè·å¾—ã€è§£æå½“å‰ç½‘é¡µhtmlå†…å®¹">Step2ï¼šè·å¾—ã€è§£æå½“å‰ç½‘é¡µhtmlå†…å®¹</a></li>
                    <li>
                        <a href="#step3%e6%88%91%e4%bb%ac%e9%9c%80%e8%a6%81%e6%a8%a1%e6%8b%9f%e9%bc%a0%e6%a0%87%e7%82%b9%e5%87%bb%e9%82%a3%e4%b8%aa%e8%8a%82%e7%82%b9%e7%82%b9%e5%a4%9a%e5%b0%91%e6%ac%a1" aria-label="Step3ï¼šæˆ‘ä»¬éœ€è¦æ¨¡æ‹Ÿé¼ æ ‡ç‚¹å‡»é‚£ä¸ªèŠ‚ç‚¹ã€ç‚¹å¤šå°‘æ¬¡">Step3ï¼šæˆ‘ä»¬éœ€è¦æ¨¡æ‹Ÿé¼ æ ‡ç‚¹å‡»é‚£ä¸ªèŠ‚ç‚¹ã€ç‚¹å¤šå°‘æ¬¡</a></li>
                    <li>
                        <a href="#step4%e5%be%aa%e7%8e%af%e7%82%b9%e5%87%bb%e8%bf%9b%e8%a1%8c%e7%9b%ae%e6%a0%87%e6%96%87%e6%9c%ac%e7%88%ac%e5%8f%96" aria-label="Step4ï¼šå¾ªç¯ç‚¹å‡»ã€è¿›è¡Œç›®æ ‡æ–‡æœ¬çˆ¬å–">Step4ï¼šå¾ªç¯ç‚¹å‡»ã€è¿›è¡Œç›®æ ‡æ–‡æœ¬çˆ¬å–</a></li></ul>
                    </li>
                    <li>
                        <a href="#%e5%ae%9e%e6%88%984%e7%88%ac%e5%8f%96%e8%a1%a8%e6%a0%bc%e7%bb%93%e6%9e%84%e7%9a%84%e6%96%87%e6%9c%ac" aria-label="å®æˆ˜4ï¼šçˆ¬å–è¡¨æ ¼ç»“æ„çš„æ–‡æœ¬">å®æˆ˜4ï¼šçˆ¬å–è¡¨æ ¼ç»“æ„çš„æ–‡æœ¬</a>
                    </li>
                </ul>
                </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>


  <div class="post-content"><h1 id="1htmlåŸºç¡€ä¸xpathè¯­æ³•">1ã€htmlåŸºç¡€ä¸xpathè¯­æ³•<a hidden class="anchor" aria-hidden="true" href="#1htmlåŸºç¡€ä¸xpathè¯­æ³•">#</a></h1>
<h2 id="11-htmlåŸºç¡€">1.1 htmlåŸºç¡€<a hidden class="anchor" aria-hidden="true" href="#11-htmlåŸºç¡€">#</a></h2>
<ul>
<li>å¤§å¤šæ•°ç½‘é¡µå†…å®¹éƒ½æ˜¯htmlç»“æ„ç»„ç»‡çš„ï¼Œåœ¨æˆ‘ç†è§£å°±æ˜¯æœ‰ä¼—å¤šèŠ‚ç‚¹(node)ç»„æˆçš„æ ‘çŠ¶ç»“æ„ï¼›</li>
<li>è€Œæˆ‘ä»¬æƒ³è¦çˆ¬å–çš„å†…å®¹å°±æ˜¯å…¶ä¸­çš„æŸä¸ªæˆ–è€…æŸäº›èŠ‚ç‚¹çš„æ–‡æœ¬æ ‡ç­¾æˆ–è€…å±æ€§ä¸­ã€‚</li>
<li>æ›´å¤šå¯å‚è€ƒï¼š
ï¼ˆ1ï¼‰https://www.w3cschool.cn/html/html-basic.html
ï¼ˆ2ï¼‰<a href="https://blog.csdn.net/zong596568821xp/article/details/83277729">HTMLé›¶åŸºç¡€å…¥é—¨æ•™ç¨‹ï¼ˆè¯¦ç»†ï¼‰_ZONGXPçš„åšå®¢-CSDNåšå®¢_html5é›¶åŸºç¡€å…¥é—¨æ•™ç¨‹</a></li>
</ul>
<p><img loading="lazy" src="https://raw.githubusercontent.com/lishensuo/images/main/20354525-f4feac53f781e66d.png" alt=""  />
</p>
<h2 id="12-xpathè¯­æ³•">1.2 xpathè¯­æ³•<a hidden class="anchor" aria-hidden="true" href="#12-xpathè¯­æ³•">#</a></h2>
<ul>
<li>
<p>ä¸€ä¸ªhtmlç½‘é¡µå¾€å¾€åŒ…å«éå¸¸å¤šçš„èŠ‚ç‚¹ï¼Œå¦‚ä½•å‡†ç¡®ã€å¿«é€Ÿå®šä½åˆ°ç›®æ ‡èŠ‚ç‚¹æ˜¯çˆ¬è™«è¿‡ç¨‹ä¸­çš„å…³é”®é—®é¢˜ï¼›è€Œxpathè¯­æ³•å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®ç°è¿™ä¸€ç‚¹ï¼›
<img src="https://raw.githubusercontent.com/lishensuo/images/main/20354525-48b2bef98ccbcec8.png" style="zoom: 67%;" /></p>
</li>
<li>
<p>xpathç®€å•æ¥è¯´æ˜¯å¸®åŠ©æˆ‘ä»¬è§£æhtmlç»“æ„çš„ä¸€ç§è¯­è¨€ï¼Œç®€å•å…¥é—¨æ¯”è¾ƒæ¨èBç«™çš„è§†é¢‘ï¼š<a href="https://www.bilibili.com/video/BV1mW411D7wC?from=search&amp;seid=2680413350697364310&amp;spm_id_from=333.337.0.0">ã€æ™ºæºå­¦é™¢ã€‘20åˆ†é’Ÿå¸¦ä½ ææ‡‚XPath â€” Scrapyæ•°æ®è§£æç¥å™¨_å“”å“©å“”å“©_bilibili</a></p>
</li>
<li>
<p>è¯­æ³•åº”ç”¨ç¬”è®°æ¨èï¼š
ï¼ˆ1ï¼‰<a href="https://blog.csdn.net/Q0717168/article/details/118819843">XPathå®šä½è¯­æ³•æ€»ç»“_Q0717168çš„åšå®¢-CSDNåšå®¢_xpathå®šä½è¯­æ³•</a>
ï¼ˆ2ï¼‰https://learnku.com/articles/50459</p>
</li>
</ul>
<h1 id="2xpathå·¥å…·æ¨è">2ã€xpathå·¥å…·æ¨è<a hidden class="anchor" aria-hidden="true" href="#2xpathå·¥å…·æ¨è">#</a></h1>
<h2 id="21-æµè§ˆå™¨è‡ªå¸¦çš„å®šä½åŠŸèƒ½">2.1 æµè§ˆå™¨è‡ªå¸¦çš„å®šä½åŠŸèƒ½<a hidden class="anchor" aria-hidden="true" href="#21-æµè§ˆå™¨è‡ªå¸¦çš„å®šä½åŠŸèƒ½">#</a></h2>
<ul>
<li>æ‰“å¼€ç›®æ ‡ç½‘é¡µâ†’ å³é”®å•å‡»â€œæ£€æŸ¥â€â†’ç‚¹å‡»å®¡æŸ¥å…ƒç´ çª—å£å·¦ä¸Šè§’ç®­å¤´â†’ç½‘é¡µç•Œé¢é€‰æ‹©æ„Ÿå…´è¶£å†…å®¹â†’é€‰ä¸­å…ƒç´ çª—å£é«˜äº®éƒ¨åˆ†â†’å³é”®å•å‡»ï¼Œé€‰æ‹©copy xpath
<img loading="lazy" src="https://raw.githubusercontent.com/lishensuo/images/main/20354525-8c7dc5ccfb0f91dd.png" alt="image.png"  />
</li>
<li>åœ¨å…ƒç´ çª—å£ï¼Œä½¿ç”¨ctrl+Få¿«æ·é”®ï¼Œå¯ä»¥ä¸æ–­è°ƒè¯•xpath
<img loading="lazy" src="https://raw.githubusercontent.com/lishensuo/images/main/20354525-21b9271e88b76cb3.png" alt=""  />
</li>
</ul>
<h2 id="22-googleæ’ä»¶ä¹‹xpath-helper">2.2 googleæ’ä»¶ä¹‹<code>XPath Helper</code><a hidden class="anchor" aria-hidden="true" href="#22-googleæ’ä»¶ä¹‹xpath-helper">#</a></h2>
<ul>
<li>å¯ä»¥ç”¨æ¥éå¸¸æ–¹ä¾¿åœ°è°ƒè¯•ã€éªŒè¯æˆ‘ä»¬çš„xpath
<img loading="lazy" src="https://raw.githubusercontent.com/lishensuo/images/main/20354525-f48cb6a1aaba7efc.png" alt=""  />
</li>
</ul>
<h2 id="23-googleæ’ä»¶ä¹‹selectorgadget">2.3 googleæ’ä»¶ä¹‹<code>SelectorGadget</code><a hidden class="anchor" aria-hidden="true" href="#23-googleæ’ä»¶ä¹‹selectorgadget">#</a></h2>
<ul>
<li>è¯¥æ’ä»¶åªéœ€è¦æˆ‘ä»¬åœ¨ç½‘é¡µé€‰æ‹©å¥½æ„Ÿå…´è¶£çš„æ ‡ç­¾ï¼Œç„¶åä¼šè‡ªåŠ¨ç”Ÿæˆèƒ½å¤Ÿå®šä½åˆ°ç›®æ ‡èŠ‚ç‚¹çš„xpathè·¯å¾„ï¼›</li>
<li>ä¸è¿‡æœ‰ä¸€ä¸ªç¼ºç‚¹å°±æ˜¯ï¼šSelectorGadgetç”Ÿæˆçš„xpathè·¯å¾„ä¸€èˆ¬æ¯”è¾ƒå¤æ‚ï¼Œå¦‚æœæˆ‘ä»¬è‡ªå·±èŠ±å¿ƒæ€è°ƒè¯•ä¸€ä¸‹(2.1)å¾€å¾€ä¼šç”Ÿæˆç®€æ´çš„xpathè·¯å¾„ã€é€šå¾€ç½—é©¬çš„é“è·¯ä¸æ­¢ä¸€æ¡ã€‘</li>
</ul>
<p><img loading="lazy" src="https://raw.githubusercontent.com/lishensuo/images/main/20354525-1b9537c6ee65b0cd.png" alt=""  />
</p>
<h1 id="3rè¯­è¨€çˆ¬è™«æµç¨‹">3ã€Rè¯­è¨€çˆ¬è™«æµç¨‹<a hidden class="anchor" aria-hidden="true" href="#3rè¯­è¨€çˆ¬è™«æµç¨‹">#</a></h1>
<blockquote>
<p>ä¸€å¼€å§‹å­¦ä¹ Rè¯­è¨€çˆ¬è™«æ—¶ï¼Œç›´æ¥<code>xml2::read_html()</code>å¯¹æäº¤çš„ç½‘å€è¿›è¡Œè§£æï¼Œä½†ç»å¸¸ä¼šå‡ºç°æäº¤æ­£ç¡®çš„xpathè·¯å¾„ï¼Œä½†æ˜¯æ²¡æœ‰æå–åˆ°èŠ‚ç‚¹å†…å®¹çš„å°´å°¬ç»“æœ<code>{xml_nodeset (0)}</code>ã€‚
åæ¥äº†è§£åˆ°é’ˆå¯¹åŠ¨æ€ç½‘é¡µçš„seleniumçˆ¬å–æ–¹æ³•ï¼Œå°è¯•äº†ä¸€ä¸‹æœç„¶å¯ä»¥å¾—åˆ°é¢„æœŸçš„ç»“æœã€‚è€Œä¸”æˆ‘è§‰å¾—åŠ¨é™æ€ç½‘é¡µé€šåƒï¼Œå› æ­¤ä»¥åçš„Rè¯­è¨€çˆ¬è™«éƒ½é‡‡ç”¨ä¸‹è¿°çš„æµç¨‹æ¥æ“ä½œã€‚
<img loading="lazy" src="https://raw.githubusercontent.com/lishensuo/images/main/20354525-b6efa5e37d415d4e.png" alt=""  />
</p></blockquote>
<ul>
<li>å‚è€ƒç¬”è®° ï¼šå¾®ä¿¡å…¬ä¼—å·ï¼šè€ä¿Šä¿Šçš„ç”Ÿä¿¡ç¬”è®°&ndash;Rè¯­è¨€çˆ¬è™«ç³»åˆ—ç¬”è®° <a href="https://mp.weixin.qq.com/s?__biz=MzkyMTI1MTYxNA==&amp;mid=2247486150&amp;idx=1&amp;sn=8ba24b1f87b8ee42a315da621b0dafda&amp;chksm=c18730b7f6f0b9a11e08ac5b0406225adb98d03c6c1f5e632ea3e2d0abf58c693222b72e3a60&amp;scene=178&amp;cur_album_id=1972125611468947458#rd">R çˆ¬è™«ä¹‹çˆ¬å–æ–‡çŒ®ä¿¡æ¯ (qq.com)</a></li>
</ul>
<h1 id="4seleniumç›¸å…³é…ç½®window-">4ã€seleniumç›¸å…³é…ç½®(window) â­<a hidden class="anchor" aria-hidden="true" href="#4seleniumç›¸å…³é…ç½®window-">#</a></h1>
<p>å‚è€ƒç¬”è®°ï¼šhttps://zhuanlan.zhihu.com/p/24772389</p>
<h2 id="step1å®‰è£…java">step1ï¼šå®‰è£…Java<a hidden class="anchor" aria-hidden="true" href="#step1å®‰è£…java">#</a></h2>
<ul>
<li>ä¸‹è½½ã€å®‰è£…å®¹æ˜“ï¼Œä½†æ˜¯å°†javaå‘½ä»¤æ·»åŠ åˆ°ç¯å¢ƒå˜é‡éœ€è¦ä»”ç»†ä¸€ç‚¹
ç½‘ä¸Šæœ‰å¾ˆå¤šç¬”è®°ï¼Œä¾‹å¦‚ï¼š<a href="https://www.yiibai.com/java/java_environment_setup.html">Java JDKå®‰è£…å’Œé…ç½® - Javaæ•™ç¨‹â„¢ (yiibai.com)</a></li>
<li>å¦‚æœåœ¨windowçš„cmdå¹³å°è°ƒç”¨<code>java</code>å‘½ä»¤ï¼Œå‡ºç°å¦‚ä¸‹ç»“æœï¼Œè¯´æ˜å®‰è£…ã€é…ç½®javaæˆåŠŸäº†
<img src="https://raw.githubusercontent.com/lishensuo/images/main/20354525-1c24fab739625421.png" style="zoom:33%;" /></li>
</ul>
<h2 id="step2chromeæµè§ˆå™¨ç›¸å…³">step2ï¼šchromeæµè§ˆå™¨ç›¸å…³<a hidden class="anchor" aria-hidden="true" href="#step2chromeæµè§ˆå™¨ç›¸å…³">#</a></h2>
<ul>
<li>é¦–å…ˆè¦ä¸‹è½½ã€å®‰è£…Chromeæµè§ˆå™¨ï¼Œæ ¹æ®æç¤ºé€‰æ‹©é»˜è®¤å®‰è£…è·¯å¾„å³å¯ <a href="https://www.google.cn/chrome/">https://www.google.cn/chrome/</a></li>
<li>ç„¶åè¦ä¸‹è½½ChromeDriver.exe <a href="https://sites.google.com/chromium.org/driver/">https://sites.google.com/chromium.org/driver/</a>
æœ‰ä¸¤ç‚¹è¦æ³¨æ„ï¼ˆ1ï¼‰ä¸‹è½½ChromeDriverç‰ˆæœ¬è¦ä¸Chromeç‰ˆæœ¬ä¸€è‡´ï¼ˆæˆ‘çš„æ˜¯94ç³»åˆ—ï¼‰ï¼›ï¼ˆ2ï¼‰å‚¨å­˜è·¯å¾„è¦ä¸<code>chrome.exe</code>åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹å†…ï¼›æˆ‘çš„å®‰è£…è·¯å¾„æ˜¯ C:\Program Files\Google\Chrome\Application</li>
</ul>
<h2 id="step3ä¸‹è½½selenium-server-standalonejar">step3ï¼šä¸‹è½½selenium-server-standalone.jar<a hidden class="anchor" aria-hidden="true" href="#step3ä¸‹è½½selenium-server-standalonejar">#</a></h2>
<ul>
<li>ä¸‹è½½åœ°å€ï¼šhttp://selenium-release.storage.googleapis.com/index.html
æœ‰å¾ˆå¤šç‰ˆæœ¬å¯ä¾›é€‰æ‹©ï¼Œæˆ‘ä¸‹è½½çš„æ˜¯3.14ç‰ˆæœ¬ï¼›åŒæ—¶ä¸ºäº†ç®¡ç†æ–¹ä¾¿ï¼Œä¸ä¸Šé¢æ–‡ä»¶æ”¾åœ¨äº†åŒä¸€æ–‡ä»¶å¤¹å†…ï¼›</li>
</ul>
<p>æœ€åå¦‚æœè°ƒç”¨ä¸‹é¢å‘½ä»¤ï¼Œå‡ºç°å¦‚ä¸‹å›¾çš„ç»“æœè¯´æ˜seleniumç›¸å…³ç¯å¢ƒéƒ½é…ç½®å¥½äº†</p>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>java -Dwebdriver.chrome.driver=<span style="color:#0ff;font-weight:bold">&#34;C:\Program Files\Google\Chrome\Application\chromedriver.exe&#34;</span> -jar <span style="color:#0ff;font-weight:bold">&#34;C:\Program Files\Google\Chrome\Application\selenium-server-standalone-3.141.59.jar&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="https://raw.githubusercontent.com/lishensuo/images/main/20354525-a32c6aab2daecd53.png" alt=""  />
</p>
<hr>
<h1 id="5è±†ç“£çˆ¬è™«å®æˆ˜">5ã€è±†ç“£çˆ¬è™«å®æˆ˜<a hidden class="anchor" aria-hidden="true" href="#5è±†ç“£çˆ¬è™«å®æˆ˜">#</a></h1>
<h2 id="å‰æœŸå‡†å¤‡">å‰æœŸå‡†å¤‡<a hidden class="anchor" aria-hidden="true" href="#å‰æœŸå‡†å¤‡">#</a></h2>
<h3 id="1å‡†å¤‡seleniumç¯å¢ƒ">ï¼ˆ1ï¼‰å‡†å¤‡seleniumç¯å¢ƒ<a hidden class="anchor" aria-hidden="true" href="#1å‡†å¤‡seleniumç¯å¢ƒ">#</a></h3>
<ul>
<li>æ‰“å¼€windowå‘½ä»¤è¡Œç•Œé¢ï¼šwin + r ï¼Œè¾“å…¥<code>cmd</code>å›è½¦ï¼›ç„¶åè¾“å…¥ä»¥ä¸‹å‘½ä»¤ã€‚å¾…æˆåŠŸå‡ºç°ä¸Šå›¾ç»“æœåï¼Œæœ€å°åŒ–ç•Œé¢å³å¯ã€‚ä¹‹åçš„æ“ä½œéƒ½åŸºäºR</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>java -Dwebdriver.chrome.driver=&#34;C:\Program Files\Google\Chrome\Application\chromedriver.exe&#34; -jar &#34;C:\Program Files\Google\Chrome\Application\selenium-server-standalone-3.141.59.jar&#34;
</span></span></code></pre></td></tr></table>
</div>
</div><img src="https://upload-images.jianshu.io/upload_images/20354525-e3455074386d18ec.png?imageMogr2/auto-orient/strip|imageView2/2/w/1240" style="zoom: 50%;" />
<h3 id="2å®‰è£…åŠ è½½råŒ…">ï¼ˆ2ï¼‰å®‰è£…ã€åŠ è½½RåŒ…<a hidden class="anchor" aria-hidden="true" href="#2å®‰è£…åŠ è½½råŒ…">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-R" data-lang="R"><span style="display:flex;"><span>library(RSelenium)  <span style="color:#007f7f">#è°ƒè¯•æµè§ˆå™¨</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>library(xml2) <span style="color:#007f7f">#è§£æhtmlç»“æ„</span>
</span></span><span style="display:flex;"><span>library(rvest) <span style="color:#007f7f">#ç»“åˆxpathï¼Œå®šä½ç›®æ ‡èŠ‚ç‚¹</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>library(tidyverse) <span style="color:#007f7f">#æ•°æ®æ•´ç†ã€æ¸…æ´—</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h1></h1>
<h2 id="å®æˆ˜1çˆ¬å–æœ€è¿‘çƒ­é—¨ç”µå½±çš„åå­—è¯„åˆ†">å®æˆ˜1ï¼šçˆ¬å–æœ€è¿‘çƒ­é—¨ç”µå½±çš„åå­—ã€è¯„åˆ†<a hidden class="anchor" aria-hidden="true" href="#å®æˆ˜1çˆ¬å–æœ€è¿‘çƒ­é—¨ç”µå½±çš„åå­—è¯„åˆ†">#</a></h2>
<img src="https://raw.githubusercontent.com/lishensuo/images/main/20354525-5938393201cbdef7.png" alt="https://movie.douban.com/" style="zoom:50%;" />
<ul>
<li>ç½‘å€é“¾æ¥ï¼šhttps://movie.douban.com/</li>
<li>ç›®æ ‡ièŠ‚ç‚¹çš„xpathè·¯å¾„ï¼š<code>//*[@id=&quot;content&quot;]/div/div[2]/div[4]/div[3]/div/div[1]/div//p</code>
<img loading="lazy" src="https://upload-images.jianshu.io/upload_images/20354525-96785473e8fbc670.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""  />
</li>
</ul>
<h3 id="step1è°ƒç”¨æµè§ˆå™¨è¿›å…¥ç›®æ ‡ç½‘å€">Step1ï¼šè°ƒç”¨æµè§ˆå™¨ï¼Œè¿›å…¥ç›®æ ‡ç½‘å€<a hidden class="anchor" aria-hidden="true" href="#step1è°ƒç”¨æµè§ˆå™¨è¿›å…¥ç›®æ ‡ç½‘å€">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-R" data-lang="R"><span style="display:flex;"><span>remDr &lt;- remoteDriver(remoteServerAddr = <span style="color:#0ff;font-weight:bold">&#34;localhost&#34;</span>, 
</span></span><span style="display:flex;"><span>                      port = <span style="color:#ff0;font-weight:bold">4444</span>, browserName = <span style="color:#0ff;font-weight:bold">&#34;chrome&#34;</span>)
</span></span><span style="display:flex;"><span>remDr$open() <span style="color:#007f7f"># æ‰“å¼€æµè§ˆå™¨</span>
</span></span><span style="display:flex;"><span>remDr$navigate(<span style="color:#0ff;font-weight:bold">&#34;https://movie.douban.com&#34;</span>) <span style="color:#007f7f">#è¿›å…¥ç½‘å€</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="step2è·å¾—è§£æå½“å‰ç½‘é¡µhtmlå†…å®¹">Step2ï¼šè·å¾—ã€è§£æå½“å‰ç½‘é¡µhtmlå†…å®¹<a hidden class="anchor" aria-hidden="true" href="#step2è·å¾—è§£æå½“å‰ç½‘é¡µhtmlå†…å®¹">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-R" data-lang="R"><span style="display:flex;"><span>webpage &lt;- read_html(remDr$getPageSource()[[1]][1]) <span style="color:#007f7f">#è·å¾—ç½‘é¡µçš„htmlå†…å®¹</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="step3åº”ç”¨xpathè·¯å¾„å®šä½è·å–ç›®æ ‡èŠ‚ç‚¹å†…å®¹">Step3ï¼šåº”ç”¨xpathè·¯å¾„ï¼Œå®šä½ã€è·å–ç›®æ ‡èŠ‚ç‚¹å†…å®¹<a hidden class="anchor" aria-hidden="true" href="#step3åº”ç”¨xpathè·¯å¾„å®šä½è·å–ç›®æ ‡èŠ‚ç‚¹å†…å®¹">#</a></h3>
<ul>
<li><code>html_text() </code> å¯è·å¾—ç›®æ ‡èŠ‚ç‚¹çš„æ–‡æœ¬å†…å®¹</li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-R" data-lang="R"><span style="display:flex;"><span>xpath_name = <span style="color:#0ff;font-weight:bold">&#39;//*[@id=&#34;content&#34;]/div/div[2]/div[4]/div[3]/div/div[1]/div//p&#39;</span>
</span></span><span style="display:flex;"><span>text_raw = html_elements(webpage, xpath = xpath_name) %&gt;% html_text() 
</span></span><span style="display:flex;"><span>str(text_raw)
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># chr [1:70] &#34;\n                \n\n                è‡´å‘½æ„Ÿåº”\n\n                \n                    6.8\n                \n            &#34; ...</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#è¿ç”¨å„ç§å­—ç¬¦å¤„ç†æŠ€å·§ï¼Œæ¸…æ´—æ•°æ®</span>
</span></span><span style="display:flex;"><span>text_fine = text_raw %&gt;% gsub(<span style="color:#0ff;font-weight:bold">&#34; &#34;</span>,<span style="color:#0ff;font-weight:bold">&#34;&#34;</span>,.) %&gt;% 
</span></span><span style="display:flex;"><span>  str_split(<span style="color:#0ff;font-weight:bold">&#34;\n{2,}&#34;</span>,simplify = <span style="color:#fff;font-weight:bold">T</span>) %&gt;% .[,<span style="color:#ff0;font-weight:bold">2</span>:<span style="color:#ff0;font-weight:bold">3</span>] %&gt;% 
</span></span><span style="display:flex;"><span>  as.data.frame() %&gt;% rename(Name=V1, Score=V2)
</span></span><span style="display:flex;"><span>head(text_fine)
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#                 Name Score</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 1          è‡´å‘½æ„Ÿåº”   6.8</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 2         å¯†å®¤é€ƒç”Ÿ2   6.2</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 3          å¥å¬å¥³å­©   8.6</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 4  æ™®å‰å²›çš„æœ€åé»„æ˜   9.0</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 5 Xç‰¹é£é˜Ÿï¼šå…¨å‘˜é›†ç»“   8.0</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 6              çµåª’   6.4</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>å…³äºç›®æ ‡èŠ‚ç‚¹çš„xpathè·¯å¾„ç¡®è®¤æ˜¯å¾ˆå…³é”®çš„ä¸€ã€‚å…¶æ¬¡å½“xpathè·¯å¾„æœ¬èº«å«æœ‰åŒå¼•å·æ—¶ï¼Œåˆ›å»ºå­—ç¬¦ä¸²æ—¶ä¸¤è¾¹è¦æ”¹åˆ°å•å¼•å·ã€‚</p></blockquote>
<h2 id="å®æˆ˜2çˆ¬å–æœ€è¿‘çƒ­é—¨ç”µå½±çš„å›¾ç‰‡è¯¦æƒ…é¡µé“¾æ¥">å®æˆ˜2ï¼šçˆ¬å–æœ€è¿‘çƒ­é—¨ç”µå½±çš„å›¾ç‰‡ã€è¯¦æƒ…é¡µé“¾æ¥<a hidden class="anchor" aria-hidden="true" href="#å®æˆ˜2çˆ¬å–æœ€è¿‘çƒ­é—¨ç”µå½±çš„å›¾ç‰‡è¯¦æƒ…é¡µé“¾æ¥">#</a></h2>
<ul>
<li>çˆ¬å–å›¾ç‰‡æ—¶æœ¬è´¨ä¸Šè¿˜æ˜¯è·å¾—å›¾ç‰‡å¯¹åº”çš„é“¾æ¥ï¼Œç„¶åå†ä¸‹è½½å³å¯ã€‚</li>
<li>è€Œé“¾æ¥å†…å®¹ä¸€èˆ¬ä½œä¸ºèŠ‚ç‚¹çš„å±æ€§å€¼ï¼Œè€Œä¸ä¼šåœ¨ç½‘é¡µæ˜¾ç¤ºå‡ºæ¥ã€‚</li>
<li><code>html_attr()</code>å¯è·å¾—ç›®æ ‡èŠ‚ç‚¹çš„å±æ€§å€¼</li>
<li>å›¾ç‰‡èŠ‚ç‚¹xapthï¼š<code>//*[@id='content']/div/div[2]/div[4]/div[3]/div/div[1]/div//div/img</code>
<img loading="lazy" src="https://upload-images.jianshu.io/upload_images/20354525-ebcf45b705549b4f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="https://movie.douban.com/"  />
</li>
</ul>
<h3 id="1çˆ¬å–å›¾ç‰‡">ï¼ˆ1ï¼‰çˆ¬å–å›¾ç‰‡<a hidden class="anchor" aria-hidden="true" href="#1çˆ¬å–å›¾ç‰‡">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-R" data-lang="R"><span style="display:flex;"><span>xpath_img = <span style="color:#0ff;font-weight:bold">&#34;//*[@id=&#39;content&#39;]/div/div[2]/div[4]/div[3]/div/div[1]/div//div/img&#34;</span>
</span></span><span style="display:flex;"><span>img_link = html_elements(webpage, xpath = xpath_img) %&gt;% 
</span></span><span style="display:flex;"><span>  html_attr(name = <span style="color:#0ff;font-weight:bold">&#39;src&#39;</span>)
</span></span><span style="display:flex;"><span>head(img_link)
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># [1] &#34;https://img1.doubanio.com/view/photo/s_ratio_poster/public/p2672792129.jpg&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># [2] &#34;https://img9.doubanio.com/view/photo/s_ratio_poster/public/p2729074424.jpg&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># [3] &#34;https://img2.doubanio.com/view/photo/s_ratio_poster/public/p2665001891.jpg&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># [4] &#34;https://img9.doubanio.com/view/photo/s_ratio_poster/public/p2652268085.jpg&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># [5] &#34;https://img2.doubanio.com/view/photo/s_ratio_poster/public/p2637084112.jpg&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># [6] &#34;https://img2.doubanio.com/view/photo/s_ratio_poster/public/p2661923862.jpg&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#æ‰¹é‡ä¸‹è½½å›¾ç‰‡</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#è·å–å±æ€§åä¸º src çš„å€¼</span>
</span></span><span style="display:flex;"><span>dir.create(<span style="color:#0ff;font-weight:bold">&#39;tmp&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">for</span> (i <span style="color:#fff;font-weight:bold">in</span> <span style="color:#ff0;font-weight:bold">1</span>:length(img_link)) {
</span></span><span style="display:flex;"><span>  <span style="color:#007f7f"># i = 1</span>
</span></span><span style="display:flex;"><span>  print(i)
</span></span><span style="display:flex;"><span>  img_name &lt;- paste0(<span style="color:#0ff;font-weight:bold">&#39;tmp/&#39;</span>,text_fine$Name[i],<span style="color:#0ff;font-weight:bold">&#34;.jpg&#34;</span>)
</span></span><span style="display:flex;"><span>  download.file(url = img_link[i],
</span></span><span style="display:flex;"><span>                destfile = img_name,
</span></span><span style="display:flex;"><span>                method = <span style="color:#0ff;font-weight:bold">&#34;curl&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><img src="https://raw.githubusercontent.com/lishensuo/images/main/20354525-6d3a2564cfe3b41c.png" style="zoom: 50%;" />
<ul>
<li>ç”±äºå¯ä»¥é€šè¿‡ç‚¹å‡»ç”µå½±åè¿›å…¥ç”µå½±è¯¦æƒ…é¡µï¼Œç”±æ­¤åˆ¤å®šåœ¨ç”µå½±åèŠ‚ç‚¹çš„å±æ€§åŒ…å«é“¾æ¥å±æ€§</li>
<li>ç”µå½±åèŠ‚ç‚¹xapthï¼š<code>//*[@id='content']/div/div[2]/div[4]/div[3]/div/div[1]/div//a</code>
<img src="https://raw.githubusercontent.com/lishensuo/images/main/20354525-a328ffe77590c6e4.png" alt="https://movie.douban.com/" style="zoom:50%;" /></li>
</ul>
<h3 id="2çˆ¬å–é“¾æ¥">ï¼ˆ2ï¼‰çˆ¬å–é“¾æ¥<a hidden class="anchor" aria-hidden="true" href="#2çˆ¬å–é“¾æ¥">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-R" data-lang="R"><span style="display:flex;"><span>xpath_link = <span style="color:#0ff;font-weight:bold">&#34;//*[@id=&#39;content&#39;]/div/div[2]/div[4]/div[3]/div/div[1]/div//a&#34;</span>
</span></span><span style="display:flex;"><span>movie_link = html_elements(webpage, xpath = xpath_link) %&gt;% 
</span></span><span style="display:flex;"><span>  html_attr(name = <span style="color:#0ff;font-weight:bold">&#39;href&#39;</span>)
</span></span><span style="display:flex;"><span>movie_info = cbind(text_fine, movie_link)
</span></span><span style="display:flex;"><span>head(movie_info)
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#           Name Score                                                          movie_link</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 1          è‡´å‘½æ„Ÿåº”   6.8 https://movie.douban.com/subject/25909236/?tag=çƒ­é—¨&amp;from=gaia_video</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 2         å¯†å®¤é€ƒç”Ÿ2   6.2       https://movie.douban.com/subject/30469922/?tag=çƒ­é—¨&amp;from=gaia</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 3          å¥å¬å¥³å­©   8.6       https://movie.douban.com/subject/35048413/?tag=çƒ­é—¨&amp;from=gaia</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 4  æ™®å‰å²›çš„æœ€åé»„æ˜   9.0       https://movie.douban.com/subject/35472124/?tag=çƒ­é—¨&amp;from=gaia</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 5 Xç‰¹é£é˜Ÿï¼šå…¨å‘˜é›†ç»“   8.0       https://movie.douban.com/subject/26741632/?tag=çƒ­é—¨&amp;from=gaia</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 6              çµåª’   6.4       https://movie.douban.com/subject/35208823/?tag=çƒ­é—¨&amp;from=gaia</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="å®æˆ˜3çˆ¬å–ä¸åŒç±»å‹æ ‡ç­¾çš„ç”µå½±åè¯„åˆ†æ¨¡æ‹Ÿé¼ æ ‡ç‚¹å‡»ç¿»é¡µ">å®æˆ˜3ï¼šçˆ¬å–ä¸åŒç±»å‹æ ‡ç­¾çš„ç”µå½±åã€è¯„åˆ†(æ¨¡æ‹Ÿé¼ æ ‡ç‚¹å‡»ç¿»é¡µ)<a hidden class="anchor" aria-hidden="true" href="#å®æˆ˜3çˆ¬å–ä¸åŒç±»å‹æ ‡ç­¾çš„ç”µå½±åè¯„åˆ†æ¨¡æ‹Ÿé¼ æ ‡ç‚¹å‡»ç¿»é¡µ">#</a></h2>
<ul>
<li>Seleniumçš„å¼ºå¤§ä¹‹å¤„è‡³äºå¯ä»¥æ¨¡æ‹Ÿé¼ æ ‡æ“ä½œè¿›è¡Œç½‘é¡µé€‰æ‹©ã€åˆ‡æ¢ï¼›</li>
<li>å¦‚ä¸‹å›¾ï¼Œæˆ‘ä»¬æƒ³è·å¾—æ¡†é€‰å‡ºçš„8ç§ç±»åˆ«çš„ç”µå½±åä¸è¯„åˆ†
<img src="https://raw.githubusercontent.com/lishensuo/images/main/20354525-e4e07d2c661bf872.png" alt="https://movie.douban.com/tag/#/" style="zoom:50%;" /></li>
<li>ç›®æ ‡ç½‘å€ï¼š<code>https://movie.douban.com/tag/#/</code></li>
</ul>
<h3 id="step1è°ƒç”¨æµè§ˆå™¨è¿›å…¥ç›®æ ‡ç½‘å€-1">Step1ï¼šè°ƒç”¨æµè§ˆå™¨ï¼Œè¿›å…¥ç›®æ ‡ç½‘å€<a hidden class="anchor" aria-hidden="true" href="#step1è°ƒç”¨æµè§ˆå™¨è¿›å…¥ç›®æ ‡ç½‘å€-1">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-R" data-lang="R"><span style="display:flex;"><span>remDr &lt;- remoteDriver(remoteServerAddr = <span style="color:#0ff;font-weight:bold">&#34;localhost&#34;</span>, 
</span></span><span style="display:flex;"><span>                      port = <span style="color:#ff0;font-weight:bold">4444</span>, browserName = <span style="color:#0ff;font-weight:bold">&#34;chrome&#34;</span>)
</span></span><span style="display:flex;"><span>remDr$open() <span style="color:#007f7f"># æ‰“å¼€æµè§ˆå™¨</span>
</span></span><span style="display:flex;"><span>remDr$navigate(<span style="color:#0ff;font-weight:bold">&#34;https://movie.douban.com&#34;</span>) <span style="color:#007f7f">#è¿›å…¥ç½‘å€</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="step2è·å¾—è§£æå½“å‰ç½‘é¡µhtmlå†…å®¹-1">Step2ï¼šè·å¾—ã€è§£æå½“å‰ç½‘é¡µhtmlå†…å®¹<a hidden class="anchor" aria-hidden="true" href="#step2è·å¾—è§£æå½“å‰ç½‘é¡µhtmlå†…å®¹-1">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-R" data-lang="R"><span style="display:flex;"><span>webpage &lt;- read_html(remDr$getPageSource()[[1]][1]) <span style="color:#007f7f">#è·å¾—ç½‘é¡µçš„htmlå†…å®¹</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="step3æˆ‘ä»¬éœ€è¦æ¨¡æ‹Ÿé¼ æ ‡ç‚¹å‡»é‚£ä¸ªèŠ‚ç‚¹ç‚¹å¤šå°‘æ¬¡">Step3ï¼šæˆ‘ä»¬éœ€è¦æ¨¡æ‹Ÿé¼ æ ‡ç‚¹å‡»é‚£ä¸ªèŠ‚ç‚¹ã€ç‚¹å¤šå°‘æ¬¡<a hidden class="anchor" aria-hidden="true" href="#step3æˆ‘ä»¬éœ€è¦æ¨¡æ‹Ÿé¼ æ ‡ç‚¹å‡»é‚£ä¸ªèŠ‚ç‚¹ç‚¹å¤šå°‘æ¬¡">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-R" data-lang="R"><span style="display:flex;"><span>movie_type = webpage %&gt;% html_elements(xpath = <span style="color:#0ff;font-weight:bold">&#34;//*[@id=&#39;app&#39;]/div/div[1]/div[1]/ul[5]//span&#34;</span>) %&gt;% 
</span></span><span style="display:flex;"><span>  html_text() %&gt;% .[2:<span style="color:#ff0;font-weight:bold">9</span>]
</span></span><span style="display:flex;"><span>movie_type
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># [1] &#34;ç»å…¸&#34; &#34;é’æ˜¥&#34; &#34;æ–‡è‰º&#34; &#34;æç¬‘&#34; &#34;åŠ±å¿—&#34; &#34;é­”å¹»&#34; &#34;æ„Ÿäºº&#34; &#34;å¥³æ€§&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="step4å¾ªç¯ç‚¹å‡»è¿›è¡Œç›®æ ‡æ–‡æœ¬çˆ¬å–">Step4ï¼šå¾ªç¯ç‚¹å‡»ã€è¿›è¡Œç›®æ ‡æ–‡æœ¬çˆ¬å–<a hidden class="anchor" aria-hidden="true" href="#step4å¾ªç¯ç‚¹å‡»è¿›è¡Œç›®æ ‡æ–‡æœ¬çˆ¬å–">#</a></h3>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">34
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-R" data-lang="R"><span style="display:flex;"><span>movie_stat = list()
</span></span><span style="display:flex;"><span><span style="color:#fff;font-weight:bold">for</span>(i <span style="color:#fff;font-weight:bold">in</span> seq(movie_type)){
</span></span><span style="display:flex;"><span>  <span style="color:#007f7f"># i=1</span>
</span></span><span style="display:flex;"><span>  print(i)
</span></span><span style="display:flex;"><span>  <span style="color:#007f7f">#é¼ æ ‡ç‚¹å‡»èŠ‚ç‚¹çš„xpathè·¯å¾„</span>
</span></span><span style="display:flex;"><span>  button_xpath = sprintf(<span style="color:#0ff;font-weight:bold">&#34;//*[@id=&#39;app&#39;]/div/div[1]/div[1]/ul[5]//span[contains(text(), &#39;%s&#39;)]&#34;</span>,
</span></span><span style="display:flex;"><span>                         movie_type[i])
</span></span><span style="display:flex;"><span>  <span style="color:#007f7f">#è¯¥èŠ‚ç‚¹çš„é¼ æ ‡ç‚¹å‡»å±æ€§</span>
</span></span><span style="display:flex;"><span>  button = remDr$findElement(using =<span style="color:#0ff;font-weight:bold">&#39;xpath&#39;</span>, value = button_xpath)
</span></span><span style="display:flex;"><span>  <span style="color:#007f7f">#æ¨¡æ‹Ÿé¼ æ ‡ç‚¹å‡»è¯¥èŠ‚ç‚¹</span>
</span></span><span style="display:flex;"><span>  button$clickElement()
</span></span><span style="display:flex;"><span>  Sys.sleep(<span style="color:#ff0;font-weight:bold">3</span>)
</span></span><span style="display:flex;"><span>  <span style="color:#007f7f">#æ›´æ–°å½“å‰htmlå†…å®¹</span>
</span></span><span style="display:flex;"><span>  webpage &lt;- read_html(remDr$getPageSource()[[1]][1])
</span></span><span style="display:flex;"><span>  xpath_name = <span style="color:#0ff;font-weight:bold">&#34;//*[@id=&#39;app&#39;]/div/div[1]/div[3]//span&#34;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#007f7f">#ç»“åˆç›®æ ‡æ–‡æœ¬çš„xpathè·¯å¾„çˆ¬å–å†…å®¹</span>
</span></span><span style="display:flex;"><span>  test_raw = html_elements(webpage, xpath = xpath_name) %&gt;% html_text() 
</span></span><span style="display:flex;"><span>  movie_stat[[i]] = data.frame(Type = movie_type[i],
</span></span><span style="display:flex;"><span>                          Name=test_raw[seq(<span style="color:#ff0;font-weight:bold">2</span>,<span style="color:#ff0;font-weight:bold">60</span>,<span style="color:#ff0;font-weight:bold">3</span>)],
</span></span><span style="display:flex;"><span>                          Score=test_raw[seq(<span style="color:#ff0;font-weight:bold">3</span>,<span style="color:#ff0;font-weight:bold">60</span>,<span style="color:#ff0;font-weight:bold">3</span>)])
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>movie_stats = do.call(rbind, movie_stat)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>head(movie_stats)
</span></span><span style="display:flex;"><span><span style="color:#007f7f">#   Type         Name Score</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 1 ç»å…¸         æ²™ä¸˜   7.8</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 2 ç»å…¸ è‚–ç”³å…‹çš„æ•‘èµ   9.7</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 3 ç»å…¸   æˆ‘ä¸æ˜¯è¯ç¥   9.0</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 4 ç»å…¸   ç–¯ç‹‚åŠ¨ç‰©åŸ   9.2</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 5 ç»å…¸     åƒä¸åƒå¯»   9.4</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 6 ç»å…¸   æ³°å¦å°¼å…‹å·   9.4</span>
</span></span><span style="display:flex;"><span>table(movie_stats$Type)
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># æ„Ÿäºº æç¬‘ ç»å…¸ åŠ±å¿— é­”å¹» å¥³æ€§ é’æ˜¥ æ–‡è‰º </span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 20   20   20   20   20   20   20   20 </span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="å®æˆ˜4çˆ¬å–è¡¨æ ¼ç»“æ„çš„æ–‡æœ¬">å®æˆ˜4ï¼šçˆ¬å–è¡¨æ ¼ç»“æ„çš„æ–‡æœ¬<a hidden class="anchor" aria-hidden="true" href="#å®æˆ˜4çˆ¬å–è¡¨æ ¼ç»“æ„çš„æ–‡æœ¬">#</a></h2>
<ul>
<li>æœ‰æ—¶å€™æˆ‘ä»¬çš„ç›®æ ‡æ•°æ®æ˜¯ä»¥è¡¨æ ¼ç»“æ„æ”¾åœ¨ç½‘é¡µçš„ï¼›æ­¤æ—¶å¯ç›´æ¥åˆ©ç”¨<code>html_table()</code>å°†è¡¨æ ¼çˆ¬å–ä¸‹æ¥</li>
<li>ç¤ºä¾‹ç½‘å€ï¼šç”±äºè±†ç“£ç½‘æ²¡æœ‰æ‰¾åˆ°è¡¨æ ¼æ•°æ®ï¼Œå› æ­¤åˆ‡æ¢åˆ°ä¹‹å‰å­¦è¿‡çš„è®°å½•ç–¾ç—…ç›¸å…³ä¿¡æ¯çš„ç½‘ç«™https://www.malacards.org/card/alzheimer_disease?search=Alzheimer%20Disease</li>
<li>è¿›å…¥æ­¤ç½‘å€ï¼Œæƒ³å¯¹ADç›¸å…³çš„åŸºå› ä¿¡æ¯è¿›è¡Œçˆ¬å–ï¼›</li>
<li>xpathè·¯å¾„ï¼š<code>//*[@id=&quot;RelatedGenes-table&quot;]</code></li>
</ul>
<div class="highlight"><div style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#727272">20
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#e5e5e5;background-color:#000;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-R" data-lang="R"><span style="display:flex;"><span>remDr &lt;- remoteDriver(remoteServerAddr = <span style="color:#0ff;font-weight:bold">&#34;localhost&#34;</span>, 
</span></span><span style="display:flex;"><span>                      port = <span style="color:#ff0;font-weight:bold">4444</span>, browserName = <span style="color:#0ff;font-weight:bold">&#34;chrome&#34;</span>)
</span></span><span style="display:flex;"><span>remDr$open() <span style="color:#007f7f"># æ‰“å¼€æµè§ˆå™¨</span>
</span></span><span style="display:flex;"><span>remDr$navigate(<span style="color:#0ff;font-weight:bold">&#34;https://www.malacards.org/card/alzheimer_disease?search=Alzheimer%20Disease&#34;</span>) <span style="color:#007f7f">#è¿›å…¥åˆ†ç±»ç½‘å€</span>
</span></span><span style="display:flex;"><span>webpage &lt;- read_html(remDr$getPageSource()[[1]][1]) <span style="color:#007f7f">#è·å¾—ç½‘é¡µçš„htmlå†…å®¹</span>
</span></span><span style="display:flex;"><span>xpath_test = <span style="color:#0ff;font-weight:bold">&#39;//*[@id=&#34;RelatedGenes-table&#34;]&#39;</span>
</span></span><span style="display:flex;"><span>test = webpage %&gt;% html_elements(xpath = xpath_test) %&gt;% 
</span></span><span style="display:flex;"><span>  html_table()
</span></span><span style="display:flex;"><span>df = test[[1]]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>head(df)
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># A tibble: 6 x 7</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># `#` Symbol      Description     Category  Score Evidence        `PubMed IDs`       </span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;           &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;              </span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 1     1 &#34;APP&#34;       Amyloid Beta P~ &#34;Protein~ 1408. &#34;Molecular bas~ &#34;1302033  1303239 ~</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 2     1 &#34;APP::MIR1~ MIR106B Macro ~ &#34;&#34;          NA  &#34;&#34;              &#34;&#34;                 </span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 3     2 &#34;HFE&#34;       Homeostatic Ir~ &#34;Protein~ 1098. &#34;Molecular bas~ &#34;12429850  8696333~</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 4     3 &#34;NOS3&#34;      Nitric Oxide S~ &#34;Protein~  708. &#34;Molecular bas~ &#34;9737779  9894802 ~</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 5     4 &#34;MPO&#34;       Myeloperoxidase &#34;Protein~  696. &#34;Molecular bas~ &#34;11087769  1291567~</span>
</span></span><span style="display:flex;"><span><span style="color:#007f7f"># 6     5 &#34;PLAU&#34;      Plasminogen Ac~ &#34;Protein~  695. &#34;Molecular bas~ &#34;12898287  1561577~</span>
</span></span></code></pre></td></tr></table>
</div>
</div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://lishensuo.github.io/en/tags/r/">R</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://lishensuo.github.io/en/posts/program/229r-%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90--tidyr%E8%A1%A8%E6%A0%BC%E6%93%8D%E4%BD%9C/">
    <span class="title">Â« Prev Page</span>
    <br>
    <span>R-æ•°æ®åˆ†æ--tidyrè¡¨æ ¼æ“ä½œ</span>
  </a>
  <a class="next" href="https://lishensuo.github.io/en/posts/program/252%E5%9F%BA%E4%BA%8Erstudio%E5%88%9B%E5%BB%BAr%E5%8C%85/">
    <span class="title">Next Page Â»</span>
    <br>
    <span>åŸºäºRstudioåˆ›å»ºRåŒ…</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2025 <a href="https://lishensuo.github.io/en/">Li&#39;s Bioinfo-Blog</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
		<br/>æ‚¨æ˜¯æœ¬ç«™ç¬¬ <span id="busuanzi_value_site_uv"></span> ä½è®¿é—®è€…ï¼Œæ€»æµè§ˆé‡ä¸º <span id="busuanzi_value_site_pv"></span> æ¬¡
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>

<script type="text/javascript"
async
src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
MathJax.Hub.Config({
tex2jax: {
inlineMath: [['$','$'], ['\\(','\\)']],
displayMath: [['$$','$$'], ['\[\[','\]\]']],
processEscapes: true,
processEnvironments: true,
skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
TeX: { equationNumbers: { autoNumber: "AMS" },
extensions: ["AMSmath.js", "AMSsymbols.js"] }
}
});

MathJax.Hub.Queue(function() {



var all = MathJax.Hub.getAllJax(), i;
for(i = 0; i < all.length; i += 1) {
all[i].SourceElement().parentNode.className += ' has-jax';
}
});
</script>

<style>
code.has-jax {
font: inherit;
font-size: 100%;
background: inherit;
border: inherit;
color: #515151;
}
</style></body>
</html>
